<project name="build-qa" default="">

	<import file="build-base.xml" />

	<target name="run.unit.tests" depends="compile">
		<antcall target="call.code.test.target">
			<param name="target.name" value="test.unit" />
		</antcall>
	</target>

	<target name="run.functional.tests" depends="compile">
		<antcall target="call.code.test.target">
			<param name="target.name" value="test.fn" />
		</antcall>
	</target>

	<target name="compute.test.coverage" depends="compile">
		<antcall target="call.code.test.target">
			<param name="target.name" value="run.coverage.analysis" />
		</antcall>
	</target>

	<target name="run.findbugs">
		<antcall target="call.code.analysis.target">
			<param name="target.name" value="run.findbugs.analysis" />
		</antcall>
	</target>

	<target name="run.checkstyle">
		<antcall target="call.code.analysis.target">
			<param name="target.name" value="run.checkstyle.analysis" />
		</antcall>
	</target>

	<target name="run.pmd">
		<antcall target="call.code.analysis.target">
			<param name="target.name" value="run.pmd.analysis" />
		</antcall>
	</target>

	<target name="run.duplicate.code.finder">
		<antcall target="call.code.analysis.target">
			<param name="target.name" value="run.duplicate.code.analysis" />
		</antcall>
	</target>

	<target name="run.full.analysis">
		<antcall target="call.code.analysis.target">
			<param name="target.name" value="run.full.analysis" />
		</antcall>
	</target>

	<target name="call.code.analysis.target">
		<ant antfile="${basedir}/../common/${ant.dir}/build-analyze.xml" inheritall="true" inheritrefs="true" target="${target.name}" />
	</target>

	<target name="call.code.test.target">
		<ant antfile="${basedir}/../common/${ant.dir}/build-testing.xml" inheritall="true" inheritrefs="true" target="${target.name}" />
	</target>

	<target name="complete.code.analysis" description="Conducts an analysis of the code in this project as defined by the settings in the code-analysis project (available in SVN).">
		<antcall target="compute.test.coverage" />
		<antcall target="run.full.analysis" />
	</target>

</project>